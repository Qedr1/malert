# ------------------------------------------------------------
# ALERTING: –ö–û–ù–§–ò–ì –ö–ê–ù–ê–õ–ê –î–û–°–¢–ê–í–ö–ò TELEGRAM
# –ó–¥–µ—Å—å —Ç–æ–ª—å–∫–æ transport-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã telegram.
# ------------------------------------------------------------

[notify.telegram]
# –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∫–∞–Ω–∞–ª Telegram.
enabled = true
# –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ (BotFather).
# –í–ê–ñ–ù–û: —ç—Ç–æ —Å–µ–∫—Ä–µ—Ç; –ø—Ä–∏ —É—Ç–µ—á–∫–µ —Ç–æ–∫–µ–Ω –Ω—É–∂–Ω–æ —Ä–æ—Ç–∏—Ä–æ–≤–∞—Ç—å.
bot_token = "8248507422:AAF_HDdFOzJierO_uXN6Jp61236ruA5QL2o"
# chat_id –∫–∞–Ω–∞–ª–∞/–≥—Ä—É–ø–ø—ã/—á–∞—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
# –î–ª—è –∫–∞–Ω–∞–ª–æ–≤ –æ–±—ã—á–Ω–æ —Ñ–æ—Ä–º–∞—Ç –≤–∏–¥–∞ -100xxxxxxxxxx.
chat_id = "-1003786123421"

[notify.telegram.retry]
# –ü–æ–ª–∏—Ç–∏–∫–∞ —Ä–µ—Ç—Ä–∞–µ–≤ –∏–º–µ–Ω–Ω–æ –¥–ª—è Telegram —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞.

# –í–∫–ª—é—á–∏—Ç—å —Ä–µ—Ç—Ä–∞–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏.
enabled = true
# –ê–ª–≥–æ—Ä–∏—Ç–º –ø–∞—É–∑—ã –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏.
# –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–æ: exponential (—Ä–æ—Å—Ç –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–æ max_ms).
backoff = "exponential"
# –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ —Ä–µ—Ç—Ä–∞—è (–º—Å).
initial_ms = 500
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ —Ä–µ—Ç—Ä–∞—è (–º—Å).
max_ms = 60000
# –ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫.
# 0 = –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ (–¥–æ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–∏—Å–∞).
max_attempts = 0
# –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é –Ω–µ—É—Å–ø–µ—à–Ω—É—é –ø–æ–ø—ã—Ç–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏.
log_each_attempt = true

[[notify.telegram.name-template]]
# –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∫–∞–Ω–∞–ª–∞ Telegram.
# –ù–∞ –Ω–µ–≥–æ —Å—Å—ã–ª–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª–∞ –≤ [[rule.<rule_name>.notify.route]].template.
name = "tg_default"
# –¢–µ–ª–æ —Å–æ–æ–±—â–µ–Ω–∏—è (Go text/template, missingkey=error).
# –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–ª—è: .RuleName .State .Var .MetricValue .StartedAt .Duration .ShortID ...
# –í–µ—Ç–∫–∞ firing.
# –ó–∞–≥–æ–ª–æ–≤–æ–∫: —ç–º–æ–¥–∑–∏ + –∏–º—è –ø—Ä–∞–≤–∏–ª–∞ + –∫–æ—Ä–æ—Ç–∫–∏–π id.
# –¢–µ–ª–æ –≤ <pre> –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è –≤ Telegram.
# –í–µ—Ç–∫–∞ resolved.
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –º–µ—Ç—Ä–∏–∫—É c (OK), –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –¥–µ–ª—å—Ç—É (fmtDuration).
message = '''
{{- if eq .State "firing" -}}
<b>‚òùÔ∏è{{ .RuleName }}</b> ({{ .ShortID }})
<pre>{{ .Var }}: {{ .MetricValue }}
–ù–∞—á–∞–ª–æ: {{ .StartedAt.Format "15:04" }}
</pre>
{{- else if eq .State "resolved" -}}
<b>üëç{{ .RuleName }}</b> ({{ .ShortID }})
<pre>{{ .Var }}: {{ .MetricValue }} (OK)
–ù–∞—á–∞–ª–æ: {{ .StartedAt.Format "15:04" }}
–î–µ–ª—å—Ç–∞: {{ fmtDuration .Duration }}
</pre>
{{- end -}}
'''
